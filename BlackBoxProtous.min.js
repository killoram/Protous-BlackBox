function getFormValues(t){t=t.split(",");for(var e={},r=0;r<t.length;r++)e[t[r]]=document.getElementById(t[r]).value;return e}function getWholeForm(t){for(var e={},r=document.getElementById(t).elements,i=0;i<r.length;i++)if("INPUT"==r[i].tagName||"SELECT"==r[i].tagName||"TEXTAREA"==r[i].tagName){var o=r[i].tagName+Math.floor(500*Math.random()),n=""!=r[i].name?r[i].name:""!=r[i].id?r[i].id:o;e[n]=r[i].value}return e}function validateForm(Form,expressions){var valid;if(null!==Form&&void 0!==Form){for(var i=0;i<expressions.length;i++){if(!eval(expressions[i])){valid=!1;break}valid=!0}return valid}}function newResponse(t,e,r){t.respond(e,r)}function neglectEvent(t,e,r){t.neglect(eventName,r)}function triggerEvent(t,e,r){t.trigger(e,r)}var PROTOUS_BLACKBOX=function(window){function x(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";string="";for(var r=0;t>r;r++)string+=e.charAt(Math.floor(Math.random()*e.length));return string}function u(t,e,r){if(4!==e.length)throw new security.exception.invalid("invalid aes block size");var i=t.b[r],o=e[0]^i[0],n=e[r?3:1]^i[1],s=e[2]^i[2];e=e[r?1:3]^i[3];var a,c,u,l,h=i.length/4-2,g=4,d=[0,0,0,0];a=t.s[r],t=a[0];var f=a[1],p=a[2],y=a[3],m=a[4];for(l=0;h>l;l++)a=t[o>>>24]^f[n>>16&255]^p[s>>8&255]^y[255&e]^i[g],c=t[n>>>24]^f[s>>16&255]^p[e>>8&255]^y[255&o]^i[g+1],u=t[s>>>24]^f[e>>16&255]^p[o>>8&255]^y[255&n]^i[g+2],e=t[e>>>24]^f[o>>16&255]^p[n>>8&255]^y[255&s]^i[g+3],g+=4,o=a,n=c,s=u;for(l=0;4>l;l++)d[r?3&-l:l]=m[o>>>24]<<24^m[n>>16&255]<<16^m[s>>8&255]<<8^m[255&e]^i[g++],a=o,o=n,n=s,s=e,e=a;return d}function v(t,e){var r,i,o,n=e.slice(0),s=t.F,a=t.b,c=s[0],u=s[1],l=s[2],h=s[3],g=s[4],d=s[5],f=s[6],p=s[7];for(r=0;64>r;r++)16>r?i=n[r]:(i=n[r+1&15],o=n[r+14&15],i=n[15&r]=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+n[15&r]+n[r+9&15]|0),i=i+p+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(f^g&(d^f))+a[r],p=f,f=d,d=g,g=h+i|0,h=l,l=u,u=c,c=i+(u&l^h&(u^l))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;s[0]=s[0]+c|0,s[1]=s[1]+u|0,s[2]=s[2]+l|0,s[3]=s[3]+h|0,s[4]=s[4]+g|0,s[5]=s[5]+d|0,s[6]=s[6]+f|0,s[7]=s[7]+p|0}function A(t,e){var r,i=security.random.K[t],o=[];for(r in i)i.hasOwnProperty(r)&&o.push(i[r]);for(r=0;r<o.length;r++)o[r](e)}function C(t){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?security.random.addEntropy(window.performance.now(),t,"loadtime"):security.random.addEntropy((new Date).valueOf(),t,"loadtime")}function y(t){t.b=z(t).concat(z(t)),t.L=new security.cipher.aes(t.b)}function z(t){for(var e=0;4>e&&(t.h[e]=t.h[e]+1|0,!t.h[e]);e++);return t.L.encrypt(t.h)}function B(t,e){return function(){e.apply(t,arguments)}}function erase(t){localStorage.removeItem(t)}function clearALLdata(){localStorage.clear(),sessionStorage.clear()}function set(t,e){var r=x(10+Math.floor(40*Math.random())),i=yhqrt(r,e);i=JSON.parse(i),i[x(2)]=r,i=JSON.stringify(i),localStorage.setItem(t,i)}function get(t){var e=localStorage.getItem(t);e=JSON.parse(e);var r=e[Object.keys(e)[Object.keys(e).length-1]];return delete e[Object.keys(e)[Object.keys(e).length-1]],e=JSON.stringify(e),e=xzzyl(r,e)}function UserAccountSystem(t){this.name=security.hash.sha256.hash(t).toString(),this.data=function(){for(var t=get(this.name)+"\n",e=JSON.parse(get(this.name)),r=0;r<e.length;r++)t+=e[r]+": "+get(e[r])+"\n";return t},this.SignUp=function(t,e,r){if(null===localStorage.getItem(t))if(null===localStorage.getItem(this.name)){var i=[];i.push(t),set(this.name,JSON.stringify(i)),null!==e?"object"==typeof e?null===e.password?console.log("Protous Error: Password property is required"):"string"==typeof e.password?set(t,JSON.stringify(e)):console.log("Protous Error: Password property must be a string"):console.log("Protous Error: The userObject parameter must be an object"):console.log("Protous Error: The userObject parameter is required")}else{var o=JSON.parse(get(this.name));o.push(t),set(JSON.stringify(o)),null!==e?"object"==typeof e?null===e.password?console.log("Protous Error: Password property is required"):"string"==typeof e.password?set(t,JSON.stringify(e)):console.log("Protous Error: Password property must be a string"):console.log("Protous Error: The userObject parameter must be an object"):console.log("Protous Error: The userObject parameter is required")}else"object"==typeof r?r():console.log("Protous Error: That username was already used!")},this.Login=function(t,e,r,i){if(null!==get(t)){var o=JSON.parse(get(t));o.password==e?sessionStorage.setItem(this.name+"-Logged-in",t):r()}else i()},this.LoginWEmail=function(t,e,r,i){for(var o=JSON.parse(get(this.name)),n=0;n<o.length;n++){var s=JSON.parse(get(o[n]));null===s.email?console.log("Protous Error: The email property does not exist"):null===s.password?console.log("Protous Error: The password property does not exist"):s.email==t?s.password==e&&sessionStorage.setItem(this.name+"-Logged-in",o[n]):null!==r&&r()}},this.Logout=function(){null!==sessionStorage.getItem(this.name+"-Logged-in")&&sessionStorage.removeItem(this.name+"-Logged-in")},this.deleteUserAccount=function(t){for(var e=JSON.parse(get(this.name)),r=0;r<e.length;r++)e[r]==t&&(delete e[r],erase(t))},this.getUsername=function(){return null!==sessionStorage.getItem(this.name+"-Logged-in")?sessionStorage.getItem(this.name+"-Logged-in"):void console.log("Protous Error: No one is logged in")},this.getUser=function(t){var e=JSON.parse(get(t));return e},this.updateUser=function(t,e){null!==get(t)?null!==e?set(t,JSON.stringify(e)):console.log("Protous Error: properties parameter is required"):console.log("Protous Error: User ["+t+"] does not exist")},this.updateUserProperty=function(t,e,r){if(null!==get(t)){var i=JSON.parse(get(t));null!==e?null!==i[e]?null!==r?(i[e]=r,set(t,JSON.stringify(i))):console.log("Protous Error: The propertyTo parameter is required"):console.log("Protous Error: The user property ["+e+"] does not exist."):console.log("Protous Error: The propertyFrom parameter is required")}else console.log("Protous Error: User ["+t+"] does not exist")}}function dataSection(name){if(this.name=security.hash.sha256.hash(name).toString(),null===localStorage.getItem(this.name)){var setup=[];set(this.name,JSON.stringify(setup))}this.debug=!1,this.add=function(t){var e=JSON.parse(get(this.name));e.push(t),set(this.name,JSON.stringify(e)),this.debug===!0&&console.log(this.name+" -> add: Object successfully added!")},this.edit=function(t,e,r,i){var o=JSON.parse(get(this.name));if(o.length>0){for(var n=0;n<o.length;n++){var s=o[n];s[t]==e&&(this.debug===!0&&(console.log(this.name+" -> edit: Object before - "),console.log(s)),s[r]=i,this.debug===!0&&(console.log(this.name+" -> edit: Object after - "),console.log(s)),o[n]=s,this.debug===!0&&console.log(this.name+" -> edit: Object saved!"))}set(this.name,JSON.stringify(o))}else this.debug===!0&&console.log(this.name+" -> edit: No objects are stored!")},this.remove=function(t,e){var r=JSON.parse(get(this.name));if(r.length>0){for(var i=0;i<r.length;i++){var o=r[i];o[t]==e&&(this.debug===!0&&(console.log(this.name+" -> remove: Object matched for removal -"),console.log(o)),r.splice(i,1),this.debug===!0&&console.log(this.name+" -> remove: Object deleted!"))}set(this.name,JSON.stringify(r))}else this.debug===!0&&console.log(this.name+" -> remove: No objects are stored!")},this.get=function(t,e){for(var r=JSON.parse(get(this.name)),i=0;i<r.length;i++){var o=r[i];if(o[t]==e)return this.debug===!0&&(console.log(this.name+" -> get: Object found! "),console.log(o)),o}return this.debug===!0&&console.log(this.name+" -> get: Object not found!"),r.length<1&&this.debug===!0&&console.log(this.name+" -> get: No objects, with the property of "+t+", matched "+e),null},this.listAll=function(){var t=JSON.parse(get(this.name));return t.length<1&&this.debug===!0&&console.log(this.name+" -> listAll: There are no stored objects to return!"),this.debug===!0&&(console.log(this.name+" -> listAll: Objects were found!"),console.log(t)),t},this.search=function(t,e){for(var r=[],i=JSON.parse(get(this.name)),o=0;o<i.length;o++){var n=i[o];n[t]==e&&(this.debug===!0&&(console.log(this.name+" -> search: Object matched - "),console.log(n)),r.push(n))}return r.length<1&&this.debug===!0&&console.log(this.name+" -> search: No objects, with the property of "+t+", matched "+e),this.debug===!0&&(console.log(this.name+" -> search: Final result - "),console.log(r)),r},this.filter=function(t,e){for(var r=new Array,i=null,o=JSON.parse(get(this.name)),n=0;n<o.length;n++){for(var s=o[n],a=t.length-1;a>=0;a--){if(s[t[a]]!=e[a]){i=!1;break}i=!0}i===!0&&(this.debug===!0&&(console.log(this.name+" -> filter: Object matched - "),console.log(s)),r.push(s))}return r.length<1&&this.debug===!0&&console.log(this.name+" -> filter: No objects matched your all values"),this.debug===!0&&(console.log(this.name+" -> filter: Final result - "),console.log(r)),r},this.filterE=function(evaluations){for(var result=new Array,check=null,rows=JSON.parse(get(this.name)),i=0;i<rows.length;i++){var row=rows[i];eval(evaluations[i].split("object").join("row"))&&(this.debug===!0&&(console.log(this.name+" -> filterE: Object matched evaluations - "),console.log(row)),result.push(row))}if(result.length<1&&this.debug===!0){var evals=evaluations.length>1?"evaluations":"evaluation";console.log(this.name+" -> filter: No objects matched your "+evals)}return this.debug===!0&&(console.log(this.name+" -> filterE: Final result - "),console.log(result)),result},this.debugFunction=function(t,e,r,i){if(void 0!==r&&void 0!==i)try{this[t](e)}catch(i){r()}else try{this[t](e)}catch(o){console.log(o)}}}function protousApp(t,e,r){if(null!==e&&void 0!==e)for(var i=e.split(" ").join("").split(","),o=i.length-1;o>=0;o--)this[i[o]]=new UserAccountSystem(i[o]),r===!0&&console.log("User Account System "+i[o]+" was successfully created!");if(null!==t)for(var n=t.split(" ").join("").split(","),o=n.length-1;o>=0;o--)this[n[o]]=new dataSection(n[o]),r===!0&&console.log("DataSection "+n[o]+" was successfully created!");this.dataSections=t,this.getProfilePicture=getProfilePicture,this.uploadProfilePic=uploadProfilePic,this.debug=function(t){for(var e=this.dataSections.split(","),i=0;i<e.length;i++)this[e[i]].debug=t;r===!0&&console.log("Debug mode status: "+t)},r===!0&&(console.log("Done!"),console.log(this))}function ProtousLogic(){for(var t=document.getElementsByTagName("users"),e="",r=0;r<t.length;r++)if(void 0!==t[r].getAttribute("protous-name")&&null!==t[r].getAttribute("protous-name")){for(var i=JSON.parse(get(t[r].getAttribute("protous-name"))),o=[],n=0;n<i.length;n++)o.push(i[n]);if(void 0!==t[r].getAttribute("show-all")&&null!==t[r].getAttribute("show-all")&&"true"==t[r].getAttribute("show-all")){for(var s=0;s<o.length;s++){var a=t[r].innerHTML,c=JSON.parse(get(o[s]));for(var u in c)a=a.split("(-"+u+"-)").join(c[u]),e+=a}t[r].innerHTML=e}else if(void 0!==t[r].getAttribute("show-where")&&null!==t[r].getAttribute("show-where")){var l=t[r].getAttribute("show-where").split("=")[0],h=t[r].getAttribute("show-where").split("=")[1];"USER"==h&&(h=sessionStorage.getItem(t[r].getAttribute("protous-name")+"-Logged-in"));for(var g=[],d=o,f=0;f<d.length;f++){var p=d[f];p[l]==h&&g.push(p)}g.length<1&&(t[r].innerHTML="",console.log(t[r]+" resulted in 0 entries."));for(var y=0;y<g.length;y++){var a=t[r].innerHTML,c=JSON.parse(get(g[y]));for(u in c)a=a.split("(-"+pname+"-)").join(c[u]);e+=a}t[r].innerHTML=e}}for(var m=document.getElementsByTagName("user"),r=0;r<m.length;r++){var l=(m[r].getAttribute("protous-name"),m[r].getAttribute("logic-where").split("=")[0]),h=m[r].getAttribute("logic-where").split("=")[1];"USER"==h&&void 0!==t[r].getAttribute("uas-name")&&null!==t[r].getAttribute("uas-name")&&(h=sessionStorage.getItem(t[r].getAttribute("uas-name")+"-Logged-in"));for(var g=[],i=get(m[r].getAttribute("protous-name")),o=[],r=0;r<i.length;r++){var v=get(i[r]);o.push(v)}for(var f=0;f<o.length;f++){var p=o[f];for(var b in p)b==l&&p[b]==h&&g.push(p)}g.length<1&&(m[r].innerHTML="",console.log(m[r]+" resulted in 0 entries."));var a=m[r].innerHTML,c=JSON.parse(get(g[0]));for(u in c)a=a.split("(-"+pname+"-)").join(c[u]);m[r].innerHTML=a}}function generateWhereLoop(t,e,r){var i=document.createElement("loop");return i.setAttribute("ds-name",t),i.setAttribute("logic-where",e),i.innerHTML=r,i}function generateAllLoop(t,e){var r=document.createElement("loop");return r.setAttribute("ds-name",t),r.setAttribute("logic-all","true"),r.innerHTML=e,r}function addWhereLoop(t,e,r,i){var o=document.createElement("loop");o.setAttribute("ds-name",e),o.setAttribute("logic-where",r),o.innerHTML=i,document.getElementById(t).appendChild(o)}function addAllLoop(t,e,r){var i=document.createElement("loop");i.setAttribute("ds-name",e),i.setAttribute("logic-all","true"),i.innerHTML=r,document.getElementById(t).appendChild(i)}function dsLogic(){for(var t=document.getElementsByTagName("loop"),e="",r=0;r<t.length;r++)if(void 0!==t[r].getAttribute("ds-name")&&null!==t[r].getAttribute("ds-name")){var i=t[r].getAttribute("ds-name");if(void 0!==t[r].getAttribute("logic-all")&&null!==t[r].getAttribute("logic-all")&&"true"==t[r].getAttribute("logic-all")){for(var o=JSON.parse(get(i)),n=0;n<o.length;n++){var s=t[r].innerHTML;for(var a in o[n]){var c=o[n];s=s.replace("(-"+a+"-)",c[a])}e+=s}t[r].innerHTML=e}else if(void 0!==t[r].getAttribute("logic-where")&&null!==t[r].getAttribute("logic-where")){var u=t[r].getAttribute("logic-where").split("=")[0],l=t[r].getAttribute("logic-where").split("=")[1];"USER"==l&&void 0!==t[r].getAttribute("uas-name")&&null!==t[r].getAttribute("uas-name")&&(l=sessionStorage.getItem(t[r].getAttribute("uas-name")+"-Logged-in"));for(var o=[],h=JSON.parse(get(i)),g=0;g<h.length;g++){var d=h[g];d[u]==l&&o.push(d)}o.length<1&&(t[r].innerHTML="",console.log(t[r]+" resulted in 0 entries."));for(var f=0;f<o.length;f++){var s=t[r].innerHTML;for(a in o[f]){var c=o[f],p=a;s=s.replace("(-"+p+"-)",c[p])}e+=s}t[r].innerHTML=e}}for(var y=document.getElementsByTagName("view"),r=0;r<y.length;r++){var i=y[r].getAttribute("ds-name"),u=y[r].getAttribute("logic-where").split("=")[0],l=y[r].getAttribute("logic-where").split("=")[1];"USER"==l&&void 0!==t[r].getAttribute("uas-name")&&null!==t[r].getAttribute("uas-name")&&(l=sessionStorage.getItem(t[r].getAttribute("uas-name")+"-Logged-in"));for(var o=[],h=JSON.parse(get(i)),g=0;g<h.length;g++){var d=h[g];for(var m in d)m==u&&d[m]==l&&o.push(d)}o.length<1&&(y[r].innerHTML="",console.log(y[r]+" resulted in 0 entries."));var s=y[r].innerHTML;for(a in o[0]){var c=o[0],p=a;s=s.replace("(-"+p+"-)",c[p])}y[r].innerHTML=s}}function processConstants(t,e){for(var r in e){var i="function"==typeof e[r]?e[r]():"string"==typeof e[r]?e[r]:JSON.stringify(e[r]);t=t.split("$["+r+"]").join(i)}return t}function logicLoop(tagname,array,constants,extend){for(var loops=document.getElementsByTagName(tagname),output="",i=0;i<loops.length;i++)if(void 0!==loops[i].getAttribute("include-where")&&null!==loops[i].getAttribute("include-where")&&"READALL"==loops[i].getAttribute("include-where")){for(var result=array,w=0;w<result.length;w++){var html=loops[i].innerHTML;for(var prop in result[w]){var obj=result[w];html=html.split("[-"+prop+"-]").join(obj[prop]),html=processConstants(html,constants)}output+=html}loops[i].innerHTML=output}else if(void 0!==loops[i].getAttribute("include-where")&&null!==loops[i].getAttribute("include-where")){var expression=loops[i].getAttribute("include-where");if(void 0!==constants&&null!==constants)for(var c in constants){var val="function"==typeof constants[c]?constants[c]():"string"==typeof constants[c]?constants[c]:JSON.stringify(constants[c]);expression=expression.split("$["+c+"]").join('"'+val+'"')}for(var result=[],x=0;x<array.length;x++){var obj=array[x],Teval=expression;for(var key in obj)Teval=Teval.split("[-"+key+"-]").join('"'+obj[key]+'"');eval(Teval)&&result.push(obj)}for(var y=0;y<result.length;y++){var html=loops[i].innerHTML;for(prop in result[y]){var obj=result[y],pname=prop;html=html.split("[-"+pname+"-]").join(obj[pname]),html=processConstants(html,constants)}output+=html}loops[i].innerHTML=output}if(void 0!==constants&&null!==constants&&1==extend){var generatedHTML=document.body.innerHTML;document.body.innerHTML=processConstants(document.body.innerHTML,constants)}var z,i,a,file,xhttp;for(z=document.getElementsByTagName("*"),i=0;i<z.length;i++)if(z[i].getAttribute("include-file")){a=z[i].cloneNode(!1),file=z[i].getAttribute("include-file");var xhttp=new XMLHttpRequest;return xhttp.onreadystatechange=function(){4==xhttp.readyState&&200==xhttp.status&&(a.removeAttribute("include-file"),a.innerHTML=xhttp.responseText,z[i].parentNode.replaceChild(a,z[i]))},xhttp.open("GET",file,!0),void xhttp.send()}}var security={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};"undefined"!=typeof module&&module.exports&&(module.exports=security),"function"==typeof define&&define([],function(){return security}),security.cipher.aes=function(t){this.s[0][0][0]||this.O();var e,r,i,o,n=this.s[0][4],s=this.s[1];e=t.length;var a=1;if(4!==e&&6!==e&&8!==e)throw new security.exception.invalid("invalid aes key size");for(this.b=[i=t.slice(0),o=[]],t=e;4*e+28>t;t++)r=i[t-1],(0===t%e||8===e&&4===t%e)&&(r=n[r>>>24]<<24^n[r>>16&255]<<16^n[r>>8&255]<<8^n[255&r],0===t%e&&(r=r<<8^r>>>24^a<<24,a=a<<1^283*(a>>7))),i[t]=i[t-e]^r;for(e=0;t;e++,t--)r=i[3&e?t:t-4],o[e]=4>=t||4>e?r:s[0][n[r>>>24]]^s[1][n[r>>16&255]]^s[2][n[r>>8&255]]^s[3][n[255&r]]},security.cipher.aes.prototype={encrypt:function(t){return u(this,t,0)},decrypt:function(t){return u(this,t,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var t,e,r,i,o,n,s,a=this.s[0],c=this.s[1],u=a[4],l=c[4],h=[],g=[];for(t=0;256>t;t++)g[(h[t]=t<<1^283*(t>>7))^t]=t;for(e=r=0;!u[e];e^=i||1,r=g[r]||1)for(n=r^r<<1^r<<2^r<<3^r<<4,n=n>>8^255&n^99,u[e]=n,l[n]=e,o=h[t=h[i=h[e]]],s=16843009*o^65537*t^257*i^16843008*e,o=257*h[n]^16843008*n,t=0;4>t;t++)a[t][e]=o=o<<24^o>>>8,c[t][n]=s=s<<24^s>>>8;for(t=0;5>t;t++)a[t]=a[t].slice(0),c[t]=c[t].slice(0)}},security.bitArray={bitSlice:function(t,e,r){return t=security.bitArray.$(t.slice(e/32),32-(31&e)).slice(1),void 0===r?t:security.bitArray.clamp(t,r-e)},extract:function(t,e,r){var i=Math.floor(-e-r&31);return(-32&(e+r-1^e)?t[e/32|0]<<32-i^t[e/32+1|0]>>>i:t[e/32|0]>>>i)&(1<<r)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var r=t[t.length-1],i=security.bitArray.getPartial(r);return 32===i?t.concat(e):security.bitArray.$(e,i,0|r,t.slice(0,t.length-1))},bitLength:function(t){var e=t.length;return 0===e?0:32*(e-1)+security.bitArray.getPartial(t[e-1])},clamp:function(t,e){if(32*t.length<e)return t;t=t.slice(0,Math.ceil(e/32));var r=t.length;return e=31&e,r>0&&e&&(t[r-1]=security.bitArray.partial(e,t[r-1]&2147483648>>e-1,1)),t},partial:function(t,e,r){return 32===t?e:(r?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(security.bitArray.bitLength(t)!==security.bitArray.bitLength(e))return!1;var r,i=0;for(r=0;r<t.length;r++)i|=t[r]^e[r];return 0===i},$:function(t,e,r,i){var o;for(o=0,void 0===i&&(i=[]);e>=32;e-=32)i.push(r),r=0;if(0===e)return i.concat(t);for(o=0;o<t.length;o++)i.push(r|t[o]>>>e),r=t[o]<<32-e;return o=t.length?t[t.length-1]:0,t=security.bitArray.getPartial(o),i.push(security.bitArray.partial(e+t&31,e+t>32?r:i.pop(),1)),i},i:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]},byteswapM:function(t){var e,r;for(e=0;e<t.length;++e)r=t[e],t[e]=r>>>24|r>>>8&65280|(65280&r)<<8|r<<24;return t}},security.codec.utf8String={fromBits:function(t){var e,r,i="",o=security.bitArray.bitLength(t);for(e=0;o/8>e;e++)0===(3&e)&&(r=t[e/4]),i+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(i))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,r=[],i=0;for(e=0;e<t.length;e++)i=i<<8|t.charCodeAt(e),3===(3&e)&&(r.push(i),i=0);return 3&e&&r.push(security.bitArray.partial(8*(3&e),i)),r}},security.codec.hex={fromBits:function(t){var e,r="";for(e=0;e<t.length;e++)r+=((0|t[e])+0xf00000000000).toString(16).substr(4);return r.substr(0,security.bitArray.bitLength(t)/4)},toBits:function(t){var e,r,i=[];for(t=t.replace(/\s|0x/g,""),r=t.length,t+="00000000",e=0;e<t.length;e+=8)i.push(0^parseInt(t.substr(e,8),16));return security.bitArray.clamp(i,4*r)}},security.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(t,e,r){var i=security.codec.base32.BASE,o=security.codec.base32.REMAINING,n="",s=0,a=security.codec.base32.B,c=0,u=security.bitArray.bitLength(t);for(r&&(a=security.codec.base32.X),r=0;n.length*i<u;)n+=a.charAt((c^t[r]>>>s)>>>o),i>s?(c=t[r]<<i-s,s+=o,r++):(c<<=i,s-=i);for(;7&n.length&&!e;)n+="=";return n},toBits:function(t,e){t=t.replace(/\s|=/g,"").toUpperCase();var r,i,o=security.codec.base32.BITS,n=security.codec.base32.BASE,s=security.codec.base32.REMAINING,a=[],c=0,u=security.codec.base32.B,l=0,h="base32";for(e&&(u=security.codec.base32.X,h="base32hex"),r=0;r<t.length;r++){if(i=u.indexOf(t.charAt(r)),0>i){if(!e)try{return security.codec.base32hex.toBits(t)}catch(g){}throw new security.exception.invalid("this isn't "+h+"!")}c>s?(c-=s,a.push(l^i>>>c),l=i<<o-c):(c+=n,l^=i<<o-c)}return 56&c&&a.push(security.bitArray.partial(56&c,l,1)),a}},security.codec.base32hex={fromBits:function(t,e){return security.codec.base32.fromBits(t,e,1)},toBits:function(t){return security.codec.base32.toBits(t,1)}},security.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,r){var i="",o=0,n=security.codec.base64.B,s=0,a=security.bitArray.bitLength(t);for(r&&(n=n.substr(0,62)+"-_"),r=0;6*i.length<a;)i+=n.charAt((s^t[r]>>>o)>>>26),6>o?(s=t[r]<<6-o,o+=26,r++):(s<<=6,o-=6);for(;3&i.length&&!e;)i+="=";return i},toBits:function(t,e){t=t.replace(/\s|=/g,"");var r,i,o=[],n=0,s=security.codec.base64.B,a=0;for(e&&(s=s.substr(0,62)+"-_"),r=0;r<t.length;r++){if(i=s.indexOf(t.charAt(r)),0>i)throw new security.exception.invalid("this isn't base64!");n>26?(n-=26,o.push(a^i>>>n),a=i<<32-n):(n+=6,a^=i<<32-n)}return 56&n&&o.push(security.bitArray.partial(56&n,a,1)),o}},security.codec.base64url={fromBits:function(t){return security.codec.base64.fromBits(t,1,1)},toBits:function(t){return security.codec.base64.toBits(t,1)}},security.hash.sha256=function(t){this.b[0]||this.O(),t?(this.F=t.F.slice(0),this.A=t.A.slice(0),this.l=t.l):this.reset()},security.hash.sha256.hash=function(t){return(new security.hash.sha256).update(t).finalize()},security.hash.sha256.prototype={blockSize:512,reset:function(){return this.F=this.Y.slice(0),this.A=[],this.l=0,this},update:function(t){"string"==typeof t&&(t=security.codec.utf8String.toBits(t));var e,r=this.A=security.bitArray.concat(this.A,t);for(e=this.l,t=this.l=e+security.bitArray.bitLength(t),e=512+e&-512;t>=e;e+=512)v(this,r.splice(0,16));return this},finalize:function(){var t,e=this.A,r=this.F,e=security.bitArray.concat(e,[security.bitArray.partial(1,1)]);for(t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this.l/4294967296)),e.push(0|this.l);e.length;)v(this,e.splice(0,16));return this.reset(),r},Y:[],b:[],O:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}var e,r=0,i=2;t:for(;64>r;i++){for(e=2;i>=e*e;e++)if(0===i%e)continue t;8>r&&(this.Y[r]=t(Math.pow(i,.5))),this.b[r]=t(Math.pow(i,1/3)),r++}}},security.mode.ccm={name:"ccm",G:[],listenProgress:function(t){security.mode.ccm.G.push(t)},unListenProgress:function(t){t=security.mode.ccm.G.indexOf(t),t>-1&&security.mode.ccm.G.splice(t,1)},fa:function(t){var e,r=security.mode.ccm.G.slice();for(e=0;e<r.length;e+=1)r[e](t)},encrypt:function(t,e,r,i,o){var n,s=e.slice(0),a=security.bitArray,c=a.bitLength(r)/8,u=a.bitLength(s)/8;if(o=o||64,i=i||[],7>c)throw new security.exception.invalid("ccm: iv must be at least 7 bytes");for(n=2;4>n&&u>>>8*n;n++);return 15-c>n&&(n=15-c),r=a.clamp(r,8*(15-n)),e=security.mode.ccm.V(t,e,r,i,o,n),s=security.mode.ccm.C(t,s,r,e,o,n),a.concat(s.data,s.tag)},decrypt:function(t,e,r,i,o){o=o||64,i=i||[];var n=security.bitArray,s=n.bitLength(r)/8,a=n.bitLength(e),c=n.clamp(e,a-o),u=n.bitSlice(e,a-o),a=(a-o)/8;if(7>s)throw new security.exception.invalid("ccm: iv must be at least 7 bytes");for(e=2;4>e&&a>>>8*e;e++);if(15-s>e&&(e=15-s),r=n.clamp(r,8*(15-e)),c=security.mode.ccm.C(t,c,r,u,o,e),t=security.mode.ccm.V(t,c.data,r,i,o,e),!n.equal(c.tag,t))throw new security.exception.corrupt("ccm: tag doesn't match");return c.data},na:function(t,e,r,i,o,n){var s=[],a=security.bitArray,c=a.i;if(i=[a.partial(8,(e.length?64:0)|i-2<<2|n-1)],i=a.concat(i,r),i[3]|=o,i=t.encrypt(i),e.length)for(r=a.bitLength(e)/8,65279>=r?s=[a.partial(16,r)]:4294967295>=r&&(s=a.concat([a.partial(16,65534)],[r])),s=a.concat(s,e),e=0;e<s.length;e+=4)i=t.encrypt(c(i,s.slice(e,e+4).concat([0,0,0])));return i},V:function(t,e,r,i,o,n){var s=security.bitArray,a=s.i;if(o/=8,o%2||4>o||o>16)throw new security.exception.invalid("ccm: invalid tag length");if(4294967295<i.length||4294967295<e.length)throw new security.exception.bug("ccm: can't deal with 4GiB or more data");for(r=security.mode.ccm.na(t,i,r,o,s.bitLength(e)/8,n),i=0;i<e.length;i+=4)r=t.encrypt(a(r,e.slice(i,i+4).concat([0,0,0])));return s.clamp(r,8*o)},C:function(t,e,r,i,o,n){var s,a=security.bitArray;s=a.i;var c=e.length,u=a.bitLength(e),l=c/50,h=l;if(r=a.concat([a.partial(8,n-1)],r).concat([0,0,0]).slice(0,4),i=a.bitSlice(s(i,t.encrypt(r)),0,o),!c)return{tag:i,data:[]};for(s=0;c>s;s+=4)s>l&&(security.mode.ccm.fa(s/c),l+=h),r[3]++,o=t.encrypt(r),e[s]^=o[0],e[s+1]^=o[1],e[s+2]^=o[2],e[s+3]^=o[3];return{tag:i,data:a.clamp(e,u)}}},security.mode.ocb2={name:"ocb2",encrypt:function(t,e,r,i,o,n){if(128!==security.bitArray.bitLength(r))throw new security.exception.invalid("ocb iv must be 128 bits");var s,a=security.mode.ocb2.S,c=security.bitArray,u=c.i,l=[0,0,0,0];r=a(t.encrypt(r));var h,g=[];for(i=i||[],o=o||64,s=0;s+4<e.length;s+=4)h=e.slice(s,s+4),l=u(l,h),g=g.concat(u(r,t.encrypt(u(r,h)))),r=a(r);return h=e.slice(s),e=c.bitLength(h),s=t.encrypt(u(r,[0,0,0,e])),h=c.clamp(u(h.concat([0,0,0]),s),e),l=u(l,u(h.concat([0,0,0]),s)),l=t.encrypt(u(l,u(r,a(r)))),i.length&&(l=u(l,n?i:security.mode.ocb2.pmac(t,i))),g.concat(c.concat(h,c.clamp(l,o)))},decrypt:function(t,e,r,i,o,n){if(128!==security.bitArray.bitLength(r))throw new security.exception.invalid("ocb iv must be 128 bits");o=o||64;var s,a,c=security.mode.ocb2.S,u=security.bitArray,l=u.i,h=[0,0,0,0],g=c(t.encrypt(r)),d=security.bitArray.bitLength(e)-o,f=[];for(i=i||[],r=0;d/32>r+4;r+=4)s=l(g,t.decrypt(l(g,e.slice(r,r+4)))),h=l(h,s),f=f.concat(s),g=c(g);if(a=d-32*r,s=t.encrypt(l(g,[0,0,0,a])),s=l(s,u.clamp(e.slice(r),a).concat([0,0,0])),h=l(h,s),h=t.encrypt(l(h,l(g,c(g)))),i.length&&(h=l(h,n?i:security.mode.ocb2.pmac(t,i))),!u.equal(u.clamp(h,o),u.bitSlice(e,d)))throw new security.exception.corrupt("ocb: tag doesn't match");return f.concat(u.clamp(s,a))},pmac:function(t,e){var r,i=security.mode.ocb2.S,o=security.bitArray,n=o.i,s=[0,0,0,0],a=t.encrypt([0,0,0,0]),a=n(a,i(i(a)));for(r=0;r+4<e.length;r+=4)a=i(a),s=n(s,t.encrypt(n(a,e.slice(r,r+4))));return r=e.slice(r),128>o.bitLength(r)&&(a=n(a,i(a)),r=o.concat(r,[-2147483648,0,0,0])),s=n(s,r),t.encrypt(n(i(n(a,i(a))),s))},S:function(t){return[t[0]<<1^t[1]>>>31,t[1]<<1^t[2]>>>31,t[2]<<1^t[3]>>>31,t[3]<<1^135*(t[0]>>>31)]}},security.mode.gcm={name:"gcm",encrypt:function(t,e,r,i,o){var n=e.slice(0);return e=security.bitArray,i=i||[],t=security.mode.gcm.C(!0,t,n,i,r,o||128),e.concat(t.data,t.tag)},decrypt:function(t,e,r,i,o){var n=e.slice(0),s=security.bitArray,a=s.bitLength(n);if(o=o||128,i=i||[],a>=o?(e=s.bitSlice(n,a-o),n=s.bitSlice(n,0,a-o)):(e=n,n=[]),t=security.mode.gcm.C(!1,t,n,i,r,o),!s.equal(t.tag,e))throw new security.exception.corrupt("gcm: tag doesn't match");return t.data},ka:function(t,e){var r,i,o,n,s,a=security.bitArray.i;for(o=[0,0,0,0],n=e.slice(0),r=0;128>r;r++){for((i=0!==(t[Math.floor(r/32)]&1<<31-r%32))&&(o=a(o,n)),s=0!==(1&n[3]),i=3;i>0;i--)n[i]=n[i]>>>1|(1&n[i-1])<<31;n[0]>>>=1,s&&(n[0]^=-520093696)}return o},j:function(t,e,r){var i,o=r.length;for(e=e.slice(0),i=0;o>i;i+=4)e[0]^=4294967295&r[i],e[1]^=4294967295&r[i+1],e[2]^=4294967295&r[i+2],e[3]^=4294967295&r[i+3],e=security.mode.gcm.ka(e,t);return e},C:function(t,e,r,i,o,n){var s,a,c,u,l,h,g,d,f=security.bitArray;for(h=r.length,g=f.bitLength(r),d=f.bitLength(i),a=f.bitLength(o),s=e.encrypt([0,0,0,0]),96===a?(o=o.slice(0),o=f.concat(o,[1])):(o=security.mode.gcm.j(s,[0,0,0,0],o),o=security.mode.gcm.j(s,o,[0,0,Math.floor(a/4294967296),4294967295&a])),a=security.mode.gcm.j(s,[0,0,0,0],i),l=o.slice(0),i=a.slice(0),t||(i=security.mode.gcm.j(s,a,r)),u=0;h>u;u+=4)l[3]++,c=e.encrypt(l),r[u]^=c[0],r[u+1]^=c[1],r[u+2]^=c[2],r[u+3]^=c[3];return r=f.clamp(r,g),t&&(i=security.mode.gcm.j(s,a,r)),t=[Math.floor(d/4294967296),4294967295&d,Math.floor(g/4294967296),4294967295&g],i=security.mode.gcm.j(s,i,t),c=e.encrypt(o),i[0]^=c[0],i[1]^=c[1],i[2]^=c[2],i[3]^=c[3],{tag:f.bitSlice(i,0,n),data:r}}},security.misc.hmac=function(t,e){this.W=e=e||security.hash.sha256;var r,i=[[],[]],o=e.prototype.blockSize/32;for(this.w=[new e,new e],t.length>o&&(t=e.hash(t)),r=0;o>r;r++)i[0][r]=909522486^t[r],i[1][r]=1549556828^t[r];this.w[0].update(i[0]),this.w[1].update(i[1]),this.R=new e(this.w[0])},security.misc.hmac.prototype.encrypt=security.misc.hmac.prototype.mac=function(t){if(this.aa)throw new security.exception.invalid("encrypt on already updated hmac called!");return this.update(t),this.digest(t)},security.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]),this.aa=!1},security.misc.hmac.prototype.update=function(t){this.aa=!0,this.R.update(t)},security.misc.hmac.prototype.digest=function(){var t=this.R.finalize(),t=new this.W(this.w[1]).update(t).finalize();return this.reset(),t},security.misc.pbkdf2=function(t,e,r,i,o){if(r=r||1e3,0>i||0>r)throw security.exception.invalid("invalid params to pbkdf2");"string"==typeof t&&(t=security.codec.utf8String.toBits(t)),"string"==typeof e&&(e=security.codec.utf8String.toBits(e)),o=o||security.misc.hmac,t=new o(t);var n,s,a,c,u=[],l=security.bitArray;for(c=1;32*u.length<(i||1);c++){for(o=n=t.encrypt(l.concat(e,[c])),s=1;r>s;s++)for(n=t.encrypt(n),a=0;a<n.length;a++)o[a]^=n[a];u=u.concat(o)}return i&&(u=l.clamp(u,i)),u},security.prng=function(t){this.c=[new security.hash.sha256],this.m=[0],this.P=0,this.H={},this.N=0,this.U={},this.Z=this.f=this.o=this.ha=0,this.b=[0,0,0,0,0,0,0,0],this.h=[0,0,0,0],this.L=void 0,this.M=t,this.D=!1,this.K={progress:{},seeded:{}},this.u=this.ga=0,this.I=1,this.J=2,this.ca=65536,this.T=[0,48,64,96,128,192,256,384,512,768,1024],this.da=3e4,this.ba=80},security.prng.prototype={randomWords:function(t,e){var r,i=[];r=this.isReady(e);var o;if(r===this.u)throw new security.exception.notReady("generator isn't seeded");if(r&this.J){r=!(r&this.I),o=[];var n,s=0;for(this.Z=o[0]=(new Date).valueOf()+this.da,n=0;16>n;n++)o.push(4294967296*Math.random()|0);for(n=0;n<this.c.length&&(o=o.concat(this.c[n].finalize()),s+=this.m[n],this.m[n]=0,r||!(this.P&1<<n));n++);for(this.P>=1<<this.c.length&&(this.c.push(new security.hash.sha256),this.m.push(0)),this.f-=s,s>this.o&&(this.o=s),this.P++,this.b=security.hash.sha256.hash(this.b.concat(o)),this.L=new security.cipher.aes(this.b),r=0;4>r&&(this.h[r]=this.h[r]+1|0,!this.h[r]);r++);}for(r=0;t>r;r+=4)0===(r+1)%this.ca&&y(this),o=z(this),i.push(o[0],o[1],o[2],o[3]);return y(this),i.slice(0,t)},setDefaultParanoia:function(t,e){if(0===t&&"Setting paranoia=0 will ruin your security; use it only for testing"!==e)throw"Setting paranoia=0 will ruin your security; use it only for testing";
this.M=t},addEntropy:function(t,e,r){r=r||"user";var i,o,n=(new Date).valueOf(),s=this.H[r],a=this.isReady(),c=0;switch(i=this.U[r],void 0===i&&(i=this.U[r]=this.ha++),void 0===s&&(s=this.H[r]=0),this.H[r]=(this.H[r]+1)%this.c.length,typeof t){case"number":void 0===e&&(e=1),this.c[s].update([i,this.N++,1,e,n,1,0|t]);break;case"object":if(r=Object.prototype.toString.call(t),"[object Uint32Array]"===r){for(o=[],r=0;r<t.length;r++)o.push(t[r]);t=o}else for("[object Array]"!==r&&(c=1),r=0;r<t.length&&!c;r++)"number"!=typeof t[r]&&(c=1);if(!c){if(void 0===e)for(r=e=0;r<t.length;r++)for(o=t[r];o>0;)e++,o>>>=1;this.c[s].update([i,this.N++,2,e,n,t.length].concat(t))}break;case"string":void 0===e&&(e=t.length),this.c[s].update([i,this.N++,3,e,n,t.length]),this.c[s].update(t);break;default:c=1}if(c)throw new security.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[s]+=e,this.f+=e,a===this.u&&(this.isReady()!==this.u&&A("seeded",Math.max(this.o,this.f)),A("progress",this.getProgress()))},isReady:function(t){return t=this.T[void 0!==t?t:this.M],this.o&&this.o>=t?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=t?this.J|this.u:this.u},getProgress:function(t){return t=this.T[t?t:this.M],this.o>=t?1:this.f>t?1:this.f/t},startCollectors:function(){if(!this.D){if(this.a={loadTimeCollector:B(this,this.ma),mouseCollector:B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,this.ea),touchCollector:B(this,this.qa)},window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else{if(!document.attachEvent)throw new security.exception.bug("can't attach event");document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)}this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(t,e){this.K[t][this.ga++]=e},removeEventListener:function(t,e){var r,i,o=this.K[t],n=[];for(i in o)o.hasOwnProperty(i)&&o[i]===e&&n.push(i);for(r=0;r<n.length;r++)i=n[r],delete o[i]},la:function(){C(1)},oa:function(t){var e,r;try{e=t.x||t.clientX||t.offsetX||0,r=t.y||t.clientY||t.offsetY||0}catch(i){r=e=0}0!=e&&0!=r&&security.random.addEntropy([e,r],2,"mouse"),C(0)},qa:function(t){t=t.touches[0]||t.changedTouches[0],security.random.addEntropy([t.pageX||t.clientX,t.pageY||t.clientY],1,"touch"),C(0)},ma:function(){C(2)},ea:function(t){if(t=t.accelerationIncludingGravity.x||t.accelerationIncludingGravity.y||t.accelerationIncludingGravity.z,window.orientation){var e=window.orientation;"number"==typeof e&&security.random.addEntropy(e,1,"accelerometer")}t&&security.random.addEntropy(t,2,"accelerometer"),C(0)}},security.random=new security.prng(6);t:try{var D,E,F,G;if(G="undefined"!=typeof module&&module.exports){var H;try{H=require("crypto")}catch(a){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128),D=new Uint32Array(new Uint8Array(D).buffer),security.random.addEntropy(D,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(F=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(F);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break t;window.msCrypto.getRandomValues(F)}security.random.addEntropy(F,1024,"crypto['getRandomValues']")}}catch(a){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(a))}security.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(t,e,r,i){r=r||{},i=i||{};var o,n=security.json,s=n.g({iv:security.random.randomWords(4,0)},n.defaults);if(n.g(s,r),r=s.adata,"string"==typeof s.salt&&(s.salt=security.codec.base64.toBits(s.salt)),"string"==typeof s.iv&&(s.iv=security.codec.base64.toBits(s.iv)),!security.mode[s.mode]||!security.cipher[s.cipher]||"string"==typeof t&&100>=s.iter||64!==s.ts&&96!==s.ts&&128!==s.ts||128!==s.ks&&192!==s.ks&&256!==s.ks||2>s.iv.length||4<s.iv.length)throw new security.exception.invalid("json encrypt: invalid parameters");return"string"==typeof t?(o=security.misc.cachedPbkdf2(t,s),t=o.key.slice(0,s.ks/32),s.salt=o.salt):security.ecc&&t instanceof security.ecc.elGamal.publicKey&&(o=t.kem(),s.kemtag=o.tag,t=o.key.slice(0,s.ks/32)),"string"==typeof e&&(e=security.codec.utf8String.toBits(e)),"string"==typeof r&&(s.adata=r=security.codec.utf8String.toBits(r)),o=new security.cipher[s.cipher](t),n.g(i,s),i.key=t,s.ct="ccm"===s.mode&&security.arrayBuffer&&security.arrayBuffer.ccm&&e instanceof ArrayBuffer?security.arrayBuffer.ccm.encrypt(o,e,s.iv,r,s.ts):security.mode[s.mode].encrypt(o,e,s.iv,r,s.ts),s},encrypt:function(t,e,r,i){var o=security.json,n=o.ja.apply(o,arguments);return o.encode(n)},ia:function(t,e,r,i){r=r||{},i=i||{};var o=security.json;e=o.g(o.g(o.g({},o.defaults),e),r,!0);var n,s;if(n=e.adata,"string"==typeof e.salt&&(e.salt=security.codec.base64.toBits(e.salt)),"string"==typeof e.iv&&(e.iv=security.codec.base64.toBits(e.iv)),!security.mode[e.mode]||!security.cipher[e.cipher]||"string"==typeof t&&100>=e.iter||64!==e.ts&&96!==e.ts&&128!==e.ts||128!==e.ks&&192!==e.ks&&256!==e.ks||!e.iv||2>e.iv.length||4<e.iv.length)throw new security.exception.invalid("json decrypt: invalid parameters");return"string"==typeof t?(s=security.misc.cachedPbkdf2(t,e),t=s.key.slice(0,e.ks/32),e.salt=s.salt):security.ecc&&t instanceof security.ecc.elGamal.secretKey&&(t=t.unkem(security.codec.base64.toBits(e.kemtag)).slice(0,e.ks/32)),"string"==typeof n&&(n=security.codec.utf8String.toBits(n)),s=new security.cipher[e.cipher](t),n="ccm"===e.mode&&security.arrayBuffer&&security.arrayBuffer.ccm&&e.ct instanceof ArrayBuffer?security.arrayBuffer.ccm.decrypt(s,e.ct,e.iv,e.tag,n,e.ts):security.mode[e.mode].decrypt(s,e.ct,e.iv,n,e.ts),o.g(i,e),i.key=t,1===r.raw?n:security.codec.utf8String.fromBits(n)},decrypt:function(t,e,r,i){var o=security.json;return o.ia(t,o.decode(e),r,i)},encode:function(t){var e,r="{",i="";for(e in t)if(t.hasOwnProperty(e)){if(!e.match(/^[a-z0-9]+$/i))throw new security.exception.invalid("json encode: invalid property name");switch(r+=i+'"'+e+'":',i=",",typeof t[e]){case"number":case"boolean":r+=t[e];break;case"string":r+='"'+escape(t[e])+'"';break;case"object":r+='"'+security.codec.base64.fromBits(t[e],0)+'"';break;default:throw new security.exception.bug("json encode: unsupported type")}}return r+"}"},decode:function(t){if(t=t.replace(/\s/g,""),!t.match(/^\{.*\}$/))throw new security.exception.invalid("json decode: this isn't json!");t=t.replace(/^\{|\}$/g,"").split(/,/);var e,r,i={};for(e=0;e<t.length;e++){if(!(r=t[e].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new security.exception.invalid("json decode: this isn't json!");null!=r[3]?i[r[2]]=parseInt(r[3],10):null!=r[4]?i[r[2]]=r[2].match(/^(ct|adata|salt|iv)$/)?security.codec.base64.toBits(r[4]):unescape(r[4]):null!=r[5]&&(i[r[2]]="true"===r[5])}return i},g:function(t,e,r){if(void 0===t&&(t={}),void 0===e)return t;for(var i in e)if(e.hasOwnProperty(i)){if(r&&void 0!==t[i]&&t[i]!==e[i])throw new security.exception.invalid("required parameter overridden");t[i]=e[i]}return t},sa:function(t,e){var r,i={};for(r in t)t.hasOwnProperty(r)&&t[r]!==e[r]&&(i[r]=t[r]);return i},ra:function(t,e){var r,i={};for(r=0;r<e.length;r++)void 0!==t[e[r]]&&(i[e[r]]=t[e[r]]);return i}},security.encrypt=security.json.encrypt,security.decrypt=security.json.decrypt,security.misc.pa={},security.misc.cachedPbkdf2=function(t,e){var r,i=security.misc.pa;return e=e||{},r=e.iter||1e3,i=i[t]=i[t]||{},r=i[r]=i[r]||{firstSalt:e.salt&&e.salt.length?e.salt.slice(0):security.random.randomWords(2,0)},i=void 0===e.salt?r.firstSalt:e.salt,r[i]=r[i]||security.misc.pbkdf2(t,i,e.iter),{key:r[i].slice(0),salt:i.slice(0)}},xzzyl=function(t,e){return e=security.decrypt(t,e),e=security.decrypt(t,e)},yhqrt=function(t,e){return e=security.encrypt(t,e),e=security.encrypt(t,e)},getProfilePicture=function(t,e,r){var i=get(r+"-profilepic-"+e);document.getElementById(t).src=i},uploadProfilePic=function(t,e,r,i){var o=e.target,n=new FileReader;n.onload=function(){var e=n.result;set(i+"-profilepic-"+r,e);var o=document.getElementById(t);o.src=e},n.readAsDataURL(o.files[0])};var list={},events=function(t){var e=function(e,r){t[e]=t[e]||[],t[e].push(r)},r=function(e,r){if(t[e])for(var i=0;i<t[e].length;i++)if(t[e][i]===r){t[e].splice(i,1);break}},i=function(e,r){t[e]&&t[e].forEach(function(t){t(r)})};return{respond:e,neglect:r,trigger:i}}(list),GET=function(t){var e={},r=t.location.href;if(r.split("?").join("")!=r){var i=r.substring(r.indexOf("?")+1,r.length);i=decodeURIComponent(i),i=i.split("&");for(var o=0;o<i.length;o++){var n=i[o].split("=")[0],s=i[o].split("=")[1];e[n]=s}}return e}(window);return{app:protousApp,eventSystem:events,URLdata:GET,protousLogic:ProtousLogic,generateAllLoop:generateAllLoop,generateWhereLoop:generateWhereLoop,addAllLoop:addWhereLoop,addWhereLoop:addWhereLoop,dsLogic:dsLogic,logicLoop:logicLoop,"import":function(t){return this[t]}}}(window);
